import{r as i,u as w,j as e,L as y,d as N,y as l}from"./index-Ds4M9Ic0.js";import{F as S,S as v,a as p}from"./index-BKB4MS64.js";import{i as C}from"./main-bg-CmF2ve_g.js";import{S as T,B as a}from"./Stack-DLcB4Rt3.js";import{T as c}from"./Typography-CZiULRYV.js";import{T as h}from"./TextField-M3LwTsTd.js";const A=()=>{const[x,m]=i.useState(!1),[t,g]=i.useState({email:"",password:""}),[o,r]=i.useState(null),d=w(),u=n=>{g({...t,[n.target.name]:n.target.value})},f=async n=>{m(!0),n.preventDefault();try{const s=await p.post("https://todo-cloudy.onrender.com/api/auth/login",t,{headers:{"Content-Type":"application/json"}});s.data.authToken&&(N.setItem("authToken",s.data.authToken),r(null),d("/mainpage")),s.data.error&&(await r(s.data.error),l.error(o))}catch(s){p.isAxiosError(s)&&s.response?(await r(s.response.data.error),l.error(o),console.error(o)):(r("An unexpected error occurred."),l.error(o))}finally{m(!1)}},j=()=>{window.location.href="api/auth/google"},b=()=>{window.location.href="api/auth/github"};return e.jsxs(T,{className:"signup",children:[e.jsx("img",{alt:"nature",className:"bg-img",src:C}),e.jsx(a,{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",children:e.jsxs(a,{className:"signup-box",children:[e.jsx(c,{color:"white",fontWeight:"bold",variant:"h4",textAlign:"center",paddingTop:3,children:"Login"}),e.jsxs("form",{onSubmit:f,className:"form mx-10 my-6",children:[e.jsxs(a,{display:"flex",flexDirection:"column",gap:2,children:[e.jsxs(a,{children:[e.jsx(c,{className:"label",children:"Email"}),e.jsx(h,{type:"email",name:"email",id:"email",value:t.email,onChange:u,required:!0,className:"input-login text-white"})]}),e.jsxs(a,{children:[e.jsx(c,{className:"label pt-4",children:"Password"}),e.jsx(h,{type:"password",name:"password",id:"password",value:t.password,onChange:u,required:!0,className:"input-login text-white"})]})]}),x?e.jsx(a,{className:"pt-5",children:e.jsx(y,{})}):e.jsx(a,{className:"submit-button mt-10",children:e.jsx("button",{type:"submit",children:"Login"})})]}),e.jsxs(a,{display:"flex",flexDirection:"row",gap:10,justifyContent:"center",children:[e.jsx(S,{className:"font-bold cursor-pointer text-2xl",onClick:j}),e.jsx(v,{className:"github-icon text-2xl",onClick:b})]}),e.jsxs(a,{className:"bottom",children:["Don't have an account?"," ",e.jsx("span",{className:"bottom-link",onClick:()=>d("/Signup"),children:"Signup"}),"."]})]})})]})};export{A as default};
