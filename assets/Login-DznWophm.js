import{r,u as y,j as e,L as b,d as N,y as l}from"./index-BWAzDsj0.js";import{S as v,a as u}from"./index-JF6aI-qR.js";import{i as C}from"./main-bg-W5A1Onlo.js";import{T as x,F as S}from"./index-Bn6leUYA.js";import{S as k,m as T,s as L}from"./motion-BDPao5W_.js";import{B as a,a as D}from"./Button-ChG3pmet.js";import{T as c}from"./Typography-Badc2-FJ.js";const q=()=>{const[g,d]=r.useState(!1),[s,f]=r.useState({email:"",password:""}),[o,i]=r.useState(null),m=y(),h=n=>{f({...s,[n.target.name]:n.target.value})},p=async n=>{d(!0),n.preventDefault();try{const t=await u.post("https://todo-cloudy.onrender.com/api/auth/login",s,{headers:{"Content-Type":"application/json"}});t.data.authToken&&(N.setItem("authToken",t.data.authToken),i(null),m("/mainpage")),t.data.error&&(await i(t.data.error),l.error(o))}catch(t){u.isAxiosError(t)&&t.response?(await i(t.response.data.error),l.error(o),console.error(o)):(i("An unexpected error occurred."),l.error(o))}finally{d(!1)}},j=()=>{window.location.href="api/auth/google"},w=()=>{window.location.href="api/auth/github"};return e.jsxs(k,{className:"signup",children:[e.jsx("img",{alt:"nature",className:"bg-img",src:C}),e.jsx(T.div,{initial:"hidden",animate:"show",variants:L("left","tween",.1,1),children:e.jsx(a,{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",children:e.jsxs(a,{className:"signup-box",children:[e.jsx(c,{color:"white",fontWeight:"bold",variant:"h4",textAlign:"center",paddingTop:3,children:"Login"}),e.jsxs("form",{onSubmit:p,className:"form mx-10 my-2",children:[e.jsxs(a,{display:"flex",flexDirection:"column",gap:2,children:[e.jsxs(a,{children:[e.jsx(c,{className:"label",children:"Email"}),e.jsx(x,{fullWidth:!0,type:"email",name:"email",id:"email",value:s.email,onChange:h,required:!0,className:"input-login text-white"})]}),e.jsxs(a,{children:[e.jsx(c,{className:"label pt-4",children:"Password"}),e.jsx(x,{fullWidth:!0,type:"password",name:"password",id:"password",value:s.password,onChange:h,required:!0,className:"input-login text-white"})]})]}),g?e.jsx(a,{className:"pt-5",children:e.jsx(b,{})}):e.jsx(a,{display:"flex",justifyContent:"center",mt:3,children:e.jsx(D,{variant:"contained",onClick:p,sx:{width:"200px",height:"35px"},children:"Login"})})]}),e.jsxs(a,{display:"flex",flexDirection:"row",gap:10,justifyContent:"center",children:[e.jsx(S,{className:"font-bold cursor-pointer text-2xl",onClick:j}),e.jsx(v,{className:"github-icon text-2xl",onClick:w})]}),e.jsxs(a,{className:"bottom",children:["Don't have an account?"," ",e.jsx("span",{className:"bottom-link",onClick:()=>m("/Signup"),children:"Signup"}),"."]})]})})})]})};export{q as default};
