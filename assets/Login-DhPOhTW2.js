import{r,u as b,j as e,L as y,d as N,y as l}from"./index-CwXaAz0R.js";import{F as v,S,a as u}from"./index-D-6o8Nl7.js";import{i as C}from"./main-bg-CmF2ve_g.js";import{S as T,m as k,s as L}from"./motion-C-sMM3ck.js";import{B as a}from"./Box-H1PaT7Oj.js";import{T as c}from"./Typography-BAcOIHa2.js";import{T as h}from"./TextField-BbZNygdv.js";const B=()=>{const[x,m]=r.useState(!1),[t,g]=r.useState({email:"",password:""}),[o,n]=r.useState(null),d=b(),p=i=>{g({...t,[i.target.name]:i.target.value})},f=async i=>{m(!0),i.preventDefault();try{const s=await u.post("https://todo-cloudy.onrender.com/api/auth/login",t,{headers:{"Content-Type":"application/json"}});s.data.authToken&&(N.setItem("authToken",s.data.authToken),n(null),d("/mainpage")),s.data.error&&(await n(s.data.error),l.error(o))}catch(s){u.isAxiosError(s)&&s.response?(await n(s.response.data.error),l.error(o),console.error(o)):(n("An unexpected error occurred."),l.error(o))}finally{m(!1)}},j=()=>{window.location.href="api/auth/google"},w=()=>{window.location.href="api/auth/github"};return e.jsxs(T,{className:"signup",children:[e.jsx("img",{alt:"nature",className:"bg-img",src:C}),e.jsx(k.div,{initial:"hidden",animate:"show",variants:L("left","tween",.1,1),children:e.jsx(a,{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",children:e.jsxs(a,{className:"signup-box",children:[e.jsx(c,{color:"white",fontWeight:"bold",variant:"h4",textAlign:"center",paddingTop:3,children:"Login"}),e.jsxs("form",{onSubmit:f,className:"form mx-10 my-6",children:[e.jsxs(a,{display:"flex",flexDirection:"column",gap:2,children:[e.jsxs(a,{children:[e.jsx(c,{className:"label",children:"Email"}),e.jsx(h,{type:"email",name:"email",id:"email",value:t.email,onChange:p,required:!0,className:"input-login text-white"})]}),e.jsxs(a,{children:[e.jsx(c,{className:"label pt-4",children:"Password"}),e.jsx(h,{type:"password",name:"password",id:"password",value:t.password,onChange:p,required:!0,className:"input-login text-white"})]})]}),x?e.jsx(a,{className:"pt-5",children:e.jsx(y,{})}):e.jsx(a,{className:"submit-button mt-10",children:e.jsx("button",{type:"submit",children:"Login"})})]}),e.jsxs(a,{display:"flex",flexDirection:"row",gap:10,justifyContent:"center",children:[e.jsx(v,{className:"font-bold cursor-pointer text-2xl",onClick:j}),e.jsx(S,{className:"github-icon text-2xl",onClick:w})]}),e.jsxs(a,{className:"bottom",children:["Don't have an account?"," ",e.jsx("span",{className:"bottom-link",onClick:()=>d("/Signup"),children:"Signup"}),"."]})]})})})]})};export{B as default};
