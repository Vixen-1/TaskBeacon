import{r as l,u as v,j as e,L as T,d as S}from"./index-CagRsFnG.js";/* empty css               */import{T as N,a as g}from"./index-DZc6wm_C.js";import{i as w}from"./main-bg-CmF2ve_g.js";/* empty css            */import{c as k,S as C,B as a}from"./Stack-q8OfxHJi.js";import{T as m}from"./Typography-UUMtLFSe.js";import{T as x,S as L,A as D}from"./TextField-Dbz73Yw9.js";const O=()=>{const[f,d]=l.useState(!1),[o,j]=l.useState({email:"",password:""}),[n,i]=l.useState(null),p=v(),u=t=>{j({...o,[t.target.name]:t.target.value})},y=k({components:{MuiTextField:{styleOverrides:{root:{backgroundColor:"rgba(255,255,255, 0.6) ",height:"50px",borderRadius:"8px"}}}}}),[c,r]=l.useState({open:!1,message:"",severity:"success"}),h=()=>{r(t=>({...t,open:!1}))},b=async t=>{d(!0),t.preventDefault();try{const s=await g.post("https://todo-cloudy.onrender.com/api/auth/login",o,{headers:{"Content-Type":"application/json"}});s.data.authToken&&(S.setItem("authToken",s.data.authToken),r({open:!0,message:"Login Successful",severity:"success"}),i(null),p("/mainpage")),s.data.error&&(await i(s.data.error),r({open:!0,message:`${n}`,severity:"error"}))}catch(s){g.isAxiosError(s)&&s.response?(await i(s.response.data.error),r({open:!0,message:`${n}`,severity:"error"}),console.log(n)):(i("An unexpected error occurred."),r({open:!0,message:`${n}`,severity:"error"}))}finally{d(!1)}};return e.jsxs(C,{className:"signup",children:[e.jsx("img",{alt:"nature",className:"bg-img",src:w}),e.jsx(a,{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",children:e.jsxs(a,{className:"signup-box",children:[e.jsx(m,{color:"white",fontWeight:"bold",variant:"h4",textAlign:"center",paddingTop:3,children:"Login"}),e.jsxs("form",{onSubmit:b,className:"form m-10",children:[e.jsx(N,{theme:y,children:e.jsxs(a,{display:"flex",flexDirection:"column",gap:2,children:[e.jsxs(a,{children:[e.jsx(m,{className:"label Themed TextField",children:"Email"}),e.jsx(x,{type:"email",name:"email",id:"email",value:o.email,onChange:u,required:!0,className:"input-login text-white"})]}),e.jsxs(a,{children:[e.jsx(m,{className:"label Themed TextField pt-4",children:"Password"}),e.jsx(x,{type:"password",name:"password",id:"password",value:o.password,onChange:u,required:!0,className:"input-login text-white"})]})]})}),f?e.jsx(a,{className:"pt-5",children:e.jsx(T,{})}):e.jsx(a,{className:"submit-button mt-10",children:e.jsx("button",{type:"submit",children:"Login"})})]}),e.jsxs(a,{className:"bottom",children:["Don't have an account?"," ",e.jsx("span",{className:"bottom-link",onClick:()=>p("/Signup"),children:"Signup"}),"."]})]})}),e.jsx(L,{open:c.open,autoHideDuration:3e3,onClose:h,anchorOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(D,{onClose:h,severity:c.severity,children:c.message})})]})};export{O as default};
