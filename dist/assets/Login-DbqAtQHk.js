import{r as i,u as w,j as e,L as y,d as N,y as l}from"./index-CXCGVRVu.js";/* empty css               */import{F as S,S as v,a as u}from"./index-CTpOTZo7.js";import{i as C}from"./main-bg-CmF2ve_g.js";/* empty css            */import{S as T,B as a}from"./Stack-B9yKnzGd.js";import{T as c}from"./Typography-CTQUaXGG.js";import{T as h}from"./TextField-B_COC7nP.js";const B=()=>{const[x,m]=i.useState(!1),[s,g]=i.useState({email:"",password:""}),[o,r]=i.useState(null),d=w(),p=n=>{g({...s,[n.target.name]:n.target.value})},f=async n=>{m(!0),n.preventDefault();try{const t=await u.post("https://todo-cloudy.onrender.com/api/auth/login",s,{headers:{"Content-Type":"application/json"}});t.data.authToken&&(N.setItem("authToken",t.data.authToken),r(null),d("/mainpage")),t.data.error&&(await r(t.data.error),l.error(o))}catch(t){u.isAxiosError(t)&&t.response?(await r(t.response.data.error),l.error(o),console.error(o)):(r("An unexpected error occurred."),l.error(o))}finally{m(!1)}},j=()=>{window.location.href="api/auth/google"},b=()=>{window.location.href="api/auth/github"};return e.jsxs(T,{className:"signup",children:[e.jsx("img",{alt:"nature",className:"bg-img",src:C}),e.jsx(a,{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",children:e.jsxs(a,{className:"signup-box",children:[e.jsx(c,{color:"white",fontWeight:"bold",variant:"h4",textAlign:"center",paddingTop:3,children:"Login"}),e.jsxs("form",{onSubmit:f,className:"form mx-10 my-6",children:[e.jsxs(a,{display:"flex",flexDirection:"column",gap:2,children:[e.jsxs(a,{children:[e.jsx(c,{className:"label",children:"Email"}),e.jsx(h,{type:"email",name:"email",id:"email",value:s.email,onChange:p,required:!0,className:"input-login text-white"})]}),e.jsxs(a,{children:[e.jsx(c,{className:"label pt-4",children:"Password"}),e.jsx(h,{type:"password",name:"password",id:"password",value:s.password,onChange:p,required:!0,className:"input-login text-white"})]})]}),x?e.jsx(a,{className:"pt-5",children:e.jsx(y,{})}):e.jsx(a,{className:"submit-button mt-10",children:e.jsx("button",{type:"submit",children:"Login"})})]}),e.jsxs(a,{display:"flex",flexDirection:"row",gap:10,justifyContent:"center",children:[e.jsx(S,{className:"font-bold cursor-pointer text-2xl",onClick:j}),e.jsx(v,{className:"github-icon text-2xl",onClick:b})]}),e.jsxs(a,{className:"bottom",children:["Don't have an account?"," ",e.jsx("span",{className:"bottom-link",onClick:()=>d("/Signup"),children:"Signup"}),"."]})]})})]})};export{B as default};
